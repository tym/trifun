jQuery(document).ready(function(a){function b(b){var c={action:"add_gift_card_amount",amount:a("#gift_card-amount").val(),product_id:a("#post_ID").val()},d=b.closest("span.add-new-amount-section");d.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),a.post(ywgc_data.ajax_url,c,function(b){1==b.code&&a("p._gift_card_amount_field").replaceWith(b.value),d.unblock()})}a(document).on("click","a.remove-amount",function(b){b.preventDefault();var c={action:"remove_gift_card_amount",amount:a(this).closest("span.variation-amount").find('input[name="gift-card-amounts[]"]').val(),product_id:a("#post_ID").val()},d=a(this).closest("span.variation-amount");d.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),a.post(ywgc_data.ajax_url,c,function(a){1==a.code&&d.remove(),d.unblock()})}),a(document).on("click","a.add-new-amount",function(c){c.preventDefault(),b(a(this))}),a(document).on("keypress","input#gift_card-amount",function(c){13===event.which&&(c.preventDefault(),a(this).attr("disabled","disabled"),b(a(this)),a(this).removeAttr("disabled"))}),a(document).on("change",'input[name="ywgc_physical_gift_card"]',function(b){var c=a(this).prop("checked");a('input[name="_virtual"]').prop("checked",!c)}),a(document).on("click",".image-gallery-reset",function(b){b.preventDefault(),a("#ywgc-card-header-image img").remove(),a("#ywgc_product_image_id").val(0)}),a(document).on("click",".image-gallery-chosen",function(b){b.preventDefault();var d,c=a(this),e=c.attr("name")+"_id";if(d)return void d.open();var f=[new wp.media.controller.Library({library:wp.media.query(),multiple:!1,title:ywgc_data.choose_image_text,priority:20,filterable:"uploaded"})];d=wp.media.frames.downloadable_file=wp.media({title:ywgc_data.choose_image_text,library:{type:""},button:{text:ywgc_data.choose_image_text},multiple:!1,states:f}),d.on("select",function(){a("#ywgc-card-header-image img").remove();var b=d.state().get("selection").first().toJSON();a("#ywgc-card-header-image").prepend('<img width="80" src="'+b.url+'" />'),a("#"+e).val(b.id),a(".plugin-option .upload_img_url").trigger("change")}),d.open()})});