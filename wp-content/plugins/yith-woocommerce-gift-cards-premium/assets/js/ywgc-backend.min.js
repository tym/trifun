jQuery(document).ready(function(e){function t(t){var a={action:"add_gift_card_amount",amount:e("#gift_card-amount").val(),product_id:e("#post_ID").val()},o=t.closest("span.add-new-amount-section");o.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),e.post(ywgc_data.ajax_url,a,function(t){1==t.code&&e("p._gift_card_amount_field").replaceWith(t.value),o.unblock()})}e(document).on("click","a.remove-amount",function(t){t.preventDefault();var a={action:"remove_gift_card_amount",amount:e(this).closest("span.variation-amount").find('input[name="gift-card-amounts[]"]').val(),product_id:e("#post_ID").val()},o=e(this).closest("span.variation-amount");o.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),e.post(ywgc_data.ajax_url,a,function(e){1==e.code&&o.remove(),o.unblock()})}),e(document).on("click","a.add-new-amount",function(a){a.preventDefault(),t(e(this))}),e(document).on("keypress","input#gift_card-amount",function(a){13===event.which&&(a.preventDefault(),e(this).attr("disabled","disabled"),t(e(this)),e(this).removeAttr("disabled"))}),e(document).on("change",'input[name="ywgc_physical_gift_card"]',function(t){var a=e(this).prop("checked");e('input[name="_virtual"]').prop("checked",!a)}),e(document).on("click",".image-gallery-reset",function(t){t.preventDefault(),e("#ywgc-card-header-image img").remove(),e("#ywgc_product_image_id").val(0)}),e(document).on("click",".image-gallery-chosen",function(t){t.preventDefault();var a,o=e(this),n=o.attr("name")+"_id";if(a)return void a.open();var i=[new wp.media.controller.Library({library:wp.media.query(),multiple:!1,title:ywgc_data.choose_image_text,priority:20,filterable:"uploaded"})];a=wp.media.frames.downloadable_file=wp.media({title:ywgc_data.choose_image_text,library:{type:""},button:{text:ywgc_data.choose_image_text},multiple:!1,states:i}),a.on("select",function(){e("#ywgc-card-header-image img").remove();var t=a.state().get("selection").first().toJSON();e("#ywgc-card-header-image").prepend('<img width="80" src="'+t.url+'" />'),e("#"+n).val(t.id),e(".plugin-option .upload_img_url").trigger("change")}),a.open()})});