jQuery(function(a){var d=a("#yith-wcmbs-message-to-send"),m=a("#yith-wcmbs-send-button"),b=a("#yith-wcmbs-send-message-editor"),e=0<b.length?b.data("thread-id"):0,n=0<b.length?b.data("user-id"):0,f=b.find(".spinner"),c=a("#yith-wcmbs-messages-list"),p=c.data("messages-count"),g=a("#yith-wcmbs-get-older-messages"),h=a("#get-older-spinner"),q=a("#yith-wcmbs-messages").find(".inside"),k=function(){c.find("li").length>=p&&g.hide()},l=function(){c.length&&q.animate({scrollTop:c.outerHeight()},1E3,"swing")};
m.on("click",function(){if(e&&0<d.val().length){var b={thread_id:e,user_id:n,message:d.val(),action:"yith_wcmbs_send_message"};f.addClass("is-active");a.ajax({type:"POST",data:b,url:ajaxurl,success:function(a){c.append(a);d.val("");f.removeClass("is-active");l()}})}});g.on("click",function(){var b=c.find("li").length,b={thread_id:e,offset:b,action:"yith_wcmbs_get_older_messages"};h.addClass("is-active");a.ajax({type:"POST",data:b,url:ajaxurl,success:function(a){c.prepend(a);h.removeClass("is-active");
k()}})});k();l()});
